(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{z1Ek:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),a=function(){},r=e("pMnS"),u=e("Ip0R"),i=function(n,l){this.name=n,this.enable=void 0===l||l},o=function(n,l){this.name=n,this.cards=l||[]},c=e("26FU"),s=function(){function n(){this.enemy$=new c.a(new o("Egor")),this.player$=new c.a(new o("Alexander")),this.allCards=new Array}return Object.defineProperty(n.prototype,"enemy",{get:function(){return this.enemy$.getValue()},set:function(n){this.enemy$.next(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"player",{get:function(){return this.player$.getValue()},set:function(n){this.player$.next(n)},enumerable:!0,configurable:!0}),n.prototype.startGame=function(){this.initCards(),this.setCurrentPlayer()},n.prototype.initCards=function(){for(var n=0;n<20;n++){var l=new i("card "+n);this.allCards.push(l)}},n.prototype.handOutCards=function(n){n.cards=this.allCards.splice(0,6)},n.prototype.setCurrentPlayer=function(){this.currentPlayer=this.currentPlayer===this.enemy?this.player:this.currentPlayer===this.player?this.enemy:this.player},n.prototype.getCurrentPlayer=function(){return this.currentPlayer===this.enemy?this.enemy:this.currentPlayer===this.player?this.player:void 0},n.prototype.makeMoveCard=function(n){var l=this.getCurrentPlayer();l.cards=l.cards.filter(function(l){return l!==n}),this.setCurrentPlayer()},n.ngInjectableDef=t.Q({factory:function(){return new n},token:n,providedIn:"root"}),n}(),d=function(){function n(n,l,e){var t=this;this._element=n,this._renderer=l,this._gameService=e,this.enable=!0,this.onDragStart=function(n){t.enable&&(t._gameService.dragCard={target:n.target,data:t.data})}}return n.prototype.ngOnChanges=function(n){this._element&&n.enable&&this._renderer.setAttribute(this._element.nativeElement,"draggable",void 0!==this.enable?this.enable.toString():"true")},n.prototype.ngAfterViewInit=function(){this._renderer.setAttribute(this._element.nativeElement,"draggable",void 0!==this.enable?this.enable.toString():"true"),this._renderer.listen(this._element.nativeElement,"dragstart",this.onDragStart)},n}(),g=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),p=t.Ja({encapsulation:0,styles:[[".card[_ngcontent-%COMP%]{height:50px;padding:15px;background:gray;margin-left:10px;cursor:-webkit-grab}.card.disable[_ngcontent-%COMP%]{cursor:wait}"]],data:{}});function f(n){return t.Za(0,[(n()(),t.La(0,0,null,null,6,"div",[["class","card"],["gmCardDraggable",""]],null,null,null,null,null)),t.Ka(1,278528,null,0,u.i,[t.q,t.r,t.k,t.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Va(2,{disable:0}),t.Ka(3,4734976,null,0,d,[t.k,t.B,s],{enable:[0,"enable"],data:[1,"data"]},null),(n()(),t.La(4,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t.Xa(5,null,["",""])),(n()(),t.La(6,0,null,null,0,"div",[["class","image"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,1,0,"card",n(l,2,0,!e.enableDrag||!e.card.enable)),n(l,3,0,e.enableDrag&&e.card.enable,e.card)},function(n,l){n(l,5,0,l.component.card.name)})}var h=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),m=t.Ja({encapsulation:0,styles:[[".card-deck[_ngcontent-%COMP%]{width:500px;height:50px;padding:15px;display:flex;justify-content:center}"]],data:{}});function y(n){return t.Za(0,[(n()(),t.La(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.La(1,0,null,null,1,"gm-card",[],null,null,null,f,p)),t.Ka(2,114688,null,0,g,[],{card:[0,"card"],enableDrag:[1,"enableDrag"]},null)],function(n,l){n(l,2,0,l.context.$implicit,l.component.enableDrag)},null)}function v(n){return t.Za(0,[(n()(),t.La(0,0,null,null,2,"div",[["class","card-deck"]],null,null,null,null,null)),(n()(),t.Ca(16777216,null,null,1,null,y)),t.Ka(2,802816,null,0,u.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.cards)},null)}var b=function(){function n(n){this.gameService=n}return n.prototype.ngOnInit=function(){this.player$=this.gameService.enemy$,this.gameService.handOutCards(this.gameService.enemy)},n}(),C=t.Ja({encapsulation:0,styles:[[""]],data:{}});function _(n){return t.Za(0,[(n()(),t.La(0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t.Xa(-1,null,["enemy-field works!"])),(n()(),t.La(2,0,null,null,3,"gm-card-deck",[],null,null,null,v,m)),t.Ka(3,114688,null,0,h,[],{cards:[0,"cards"],enableDrag:[1,"enableDrag"]},null),t.Ua(131072,u.b,[t.h]),t.Ua(131072,u.b,[t.h])],function(n,l){var e,a=l.component;n(l,3,0,null==(e=t.Ya(l,3,0,t.Ta(l,4).transform(a.player$)))?null:e.cards,t.Ya(l,3,1,t.Ta(l,5).transform(a.player$))===a.gameService.currentPlayer)},null)}var S=function(){function n(n,l,e){var t=this;this._element=n,this._renderer=l,this._gameService=e,this.drop=function(n){n.preventDefault(),t._gameService.dropCard=t._gameService.dragCard,t._gameService.makeMoveCard(t._gameService.dropCard.data)},this.dragover=function(n){n.preventDefault()}}return n.prototype.ngAfterViewInit=function(){this._renderer.listen(this._element.nativeElement,"drop",this.drop),this._renderer.listen(this._element.nativeElement,"dragover",this.dragover)},n}(),k=function(){function n(n){this.gameSerivce=n}return n.prototype.ngOnInit=function(){},n}(),P=t.Ja({encapsulation:0,styles:[[".game-field[_ngcontent-%COMP%]{height:300px;background:green;overflow-y:auto;display:flex}"]],data:{}});function w(n){return t.Za(0,[(n()(),t.La(0,0,null,null,1,"gm-card",[["class","card"]],null,null,null,f,p)),t.Ka(1,114688,null,0,g,[],{card:[0,"card"],enableDrag:[1,"enableDrag"]},null)],function(n,l){n(l,1,0,l.component.gameSerivce.dropCard.data,!1)},null)}function O(n){return t.Za(0,[(n()(),t.La(0,0,null,null,3,"div",[["class","game-field"],["gmCardDrop",""]],null,null,null,null,null)),t.Ka(1,4210688,null,0,S,[t.k,t.B,s],null,null),(n()(),t.Ca(16777216,null,null,1,null,w)),t.Ka(3,16384,null,0,u.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,3,0,l.component.gameSerivce.dropCard)},null)}var L=function(){function n(n){this.gameService=n}return n.prototype.ngOnInit=function(){this.player$=this.gameService.player$,this.gameService.handOutCards(this.gameService.player)},n}(),D=t.Ja({encapsulation:0,styles:[[""]],data:{}});function x(n){return t.Za(0,[(n()(),t.La(0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t.Xa(-1,null,["players-field works!"])),(n()(),t.La(2,0,null,null,3,"gm-card-deck",[],null,null,null,v,m)),t.Ka(3,114688,null,0,h,[],{cards:[0,"cards"],enableDrag:[1,"enableDrag"]},null),t.Ua(131072,u.b,[t.h]),t.Ua(131072,u.b,[t.h])],function(n,l){var e,a=l.component;n(l,3,0,null==(e=t.Ya(l,3,0,t.Ta(l,4).transform(a.player$)))?null:e.cards,t.Ya(l,3,1,t.Ta(l,5).transform(a.player$))===a.gameService.currentPlayer)},null)}var $=function(){function n(n){this.gameSerivce=n}return n.prototype.ngOnInit=function(){this.gameSerivce.startGame()},n}(),I=t.Ja({encapsulation:0,styles:[[".game-page[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]{height:200px}.game-page[_ngcontent-%COMP%]   .game-field[_ngcontent-%COMP%]{height:300px;background:green;overflow-y:auto}"]],data:{}});function M(n){return t.Za(0,[(n()(),t.La(0,0,null,null,8,"div",[["class","game-page"]],null,null,null,null,null)),(n()(),t.La(1,0,null,null,2,"div",[["class","players"]],null,null,null,null,null)),(n()(),t.La(2,0,null,null,1,"gm-enemy-field",[],null,null,null,_,C)),t.Ka(3,114688,null,0,b,[s],null,null),(n()(),t.La(4,0,null,null,1,"gm-game-field",[],null,null,null,O,P)),t.Ka(5,114688,null,0,k,[s],null,null),(n()(),t.La(6,0,null,null,2,"div",[["class","players"]],null,null,null,null,null)),(n()(),t.La(7,0,null,null,1,"gm-players-field",[],null,null,null,x,D)),t.Ka(8,114688,null,0,L,[s],null,null)],function(n,l){n(l,3,0),n(l,5,0),n(l,8,0)},null)}var K=t.Ha("gm-game-page",$,function(n){return t.Za(0,[(n()(),t.La(0,0,null,null,1,"gm-game-page",[],null,null,null,M,I)),t.Ka(1,114688,null,0,$,[s],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),R=e("ZYCi"),J=function(){},Z=function(){},j=function(){},E=function(){},A=function(){},U=function(){};e.d(l,"GamePageModuleNgFactory",function(){return V});var V=t.Ia(a,[],function(n){return t.Qa([t.Ra(512,t.j,t.X,[[8,[r.a,K]],[3,t.j],t.v]),t.Ra(4608,u.m,u.l,[t.s,[2,u.r]]),t.Ra(1073742336,u.c,u.c,[]),t.Ra(1073742336,R.l,R.l,[[2,R.r],[2,R.k]]),t.Ra(1073742336,J,J,[]),t.Ra(1073742336,Z,Z,[]),t.Ra(1073742336,j,j,[]),t.Ra(1073742336,E,E,[]),t.Ra(1073742336,A,A,[]),t.Ra(1073742336,U,U,[]),t.Ra(1073742336,a,a,[]),t.Ra(1024,R.i,function(){return[[{path:"",component:$}]]},[])])})}}]);